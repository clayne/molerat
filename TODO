Add a way for a thread to install a run queue as its preferred one

Run a fallback run queue in its own thread

application_run should simply wait for application_stop to be
called.

restore SIGINT handling (main thread can handle this)

Make polling thread a runqueue thread, so it doesn't get woken from
poll so much.  Check that wakeups get reduced accordingly.

thread API probably better pointer-based

new socket read/write interfaces (return code indicates blocked,
progress (>0), error, closed)

thorough testing of http reader (byte-by-byte parsing, large bodies,
prebody-body-prebody handling)

EPIPE/SIGPIPE handling.  At least make it an error.

Fix the spurious accept issue in socket.c

ERROR_INVALID to replace many asserts

When a client_socket is connected, its ops can be set to the
simple_socket ops.

tasklet: current_stopped and current_requeue should be combined into a
single state flag.

Refine thread.c lock held checking (use thread id)

Make test programs timeout